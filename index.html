<!DOCTYPE html>
<html>
<head>
    <title>Pygame Game</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.18.1/full/pyodide.js"></script>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>
    <script type="text/python">
        import pygame
        from js import document
        import asyncio
        import micropip

        await micropip.install('pygame')

        import game  # ゲームのPythonファイルをインポート

        pygame.init()

        screen = pygame.display.set_mode((800, 600))
        pygame.display.set_caption('Pygame Game')

        running = True

        async def main():
            global running
            while running:
                for event in pygame.event.get():
                    if event.type == pygame.QUIT:
                        running = False

                screen.fill((255, 255, 255))
                pygame.draw.circle(screen, (255, 0, 0), (400, 300), 50)
                pygame.display.flip()
                await asyncio.sleep(0.01)

        asyncio.run(main())
    </script>
</body>
</html>
